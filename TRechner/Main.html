<!DOCTYPE html>
<html lang="en" data-theme="dark-magenta">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scientific Calculator + Reactive Net</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ---------- Base ---------- */
    *, *::before, *::after { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow: hidden; /* Prevent scrollbars from theme transitions */
    }
    body {
      background: var(--bg);
      color: var(--text);
      transition: background-color 0.4s ease, color 0.4s ease;
    }

    /* ===== Theme Variable Sets ===== */
    /* Light Base */
    html[data-theme^="light"] { --bg: #f7f7f9; --text: #1a1a1a; --muted: #4a4a4a; --glass-bg: rgba(255,255,255,0.65); --glass-border: rgba(0,0,0,0.08); --btn-bg: rgba(0,0,0,0.04); --btn-inset: rgba(255,255,255,0.7); --btn-shadow: rgba(0,0,0,0.18); --eq: #12b76a; --danger: #e53e3e; --shadow: 0 10px 30px rgba(0,0,0,0.08); }
    html[data-theme="light"] { --accent: #3d6aff; --net-node: rgba(0,0,0,0.45); --net-link: rgba(100,120,180,0.28); --net-cursor: rgba(60,130,255,0.40); }
    html[data-theme="light-blue"]   { --accent: #005fdb; --net-node: rgba(0,95,219,0.55); --net-link: rgba(0,95,219,0.28); --net-cursor: rgba(0,95,219,0.40); }
    html[data-theme="light-pink"]   { --accent: #d83c8a; --net-node: rgba(216,60,138,0.55); --net-link: rgba(216,60,138,0.28); --net-cursor: rgba(216,60,138,0.40); }
    html[data-theme="light-orange"] { --accent: #e97618; --net-node: rgba(233,118,24,0.55); --net-link: rgba(233,118,24,0.28); --net-cursor: rgba(233,118,24,0.40); }
    html[data-theme="light-purple"] { --accent: #7038e3; --net-node: rgba(112,56,227,0.55); --net-link: rgba(112,56,227,0.28); --net-cursor: rgba(112,56,227,0.40); }
    html[data-theme="light-magenta"]{ --accent: #c20065; --net-node: rgba(194,0,101,0.55); --net-link: rgba(194,0,101,0.28); --net-cursor: rgba(194,0,101,0.40); }
    /* Dark base */
    html[data-theme^="dark"] { --bg: #000; --text: #f3f3f3; --muted: #c9c9c9; --glass-bg: rgba(255,255,255,0.08); --glass-border: rgba(255,255,255,0.18); --btn-bg: rgba(255,255,255,0.06); --btn-inset: rgba(0,0,0,0.25); --btn-shadow: rgba(0,0,0,0.35); --eq: #47d16a; --danger: #ff6363; --shadow: 0 10px 30px rgba(0,0,0,0.45); }
    html[data-theme="dark"]        { --accent: rgba(255,255,255,0.06); --net-node: rgba(255,255,255,0.55); --net-link: rgba(200,200,200,0.28); --net-cursor: rgba(220,220,220,0.40); }
    html[data-theme="dark-blue"]   { --accent: #7aa2ff; --net-node: rgba(255,255,255,0.55); --net-link: rgba(160,190,255,0.30); --net-cursor: rgba(120,190,255,0.45); }
    html[data-theme="dark-pink"]   { --accent: #ff6bb3; --net-node: rgba(255,230,245,0.70); --net-link: rgba(255,140,200,0.32); --net-cursor: rgba(255,120,200,0.45); }
    html[data-theme="dark-orange"] { --accent: #ff9a3c; --net-node: rgba(255,240,220,0.70); --net-link: rgba(255,180,120,0.32); --net-cursor: rgba(255,160,110,0.45); }
    html[data-theme="dark-purple"] { --accent: #8b5cf6; --net-node: rgba(240,230,255,0.70); --net-link: rgba(170,140,255,0.32); --net-cursor: rgba(150,120,255,0.45); }
    html[data-theme="dark-magenta"]{ --accent: #E20074; --net-node: rgba(255,220,240,0.70); --net-link: rgba(226,0,116,0.30); --net-cursor: rgba(226,0,116,0.45); }

    /* ---------- Page & Canvas ---------- */
    #netCanvas{ position: fixed; inset: 0; width: 100%; height: 100%; display: block; pointer-events: none; z-index: 0; }
    .theme-controls{ position: fixed; top: 14px; right: 14px; z-index: 10; display: flex; gap: 10px; align-items: center; }
    .theme-toggle{ height: 40px; min-width: 40px; padding: 8px 12px; border: 1px solid var(--glass-border); border-radius: 12px; background: var(--glass-bg); color: var(--text); box-shadow: var(--shadow); cursor: pointer; backdrop-filter: blur(10px) saturate(120%); transition: transform 0.2s ease; }
    .theme-toggle:hover { transform: translateY(-1px); }
    .accent-wrap{ display: inline-flex; align-items: center; gap: 8px; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: 6px 10px; box-shadow: var(--shadow); backdrop-filter: blur(10px) saturate(120%); }
    .accent-label{ font-size: 12px; color: var(--muted); }
    .select-shell{ position: relative; display: inline-flex; align-items: center; gap: 8px; }
    .accent-dot{ width: 10px; height: 10px; border-radius: 999px; background: var(--accent); box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent); transition: background-color 0.4s ease; }
    .accent-select{ appearance: none; font-size: 14px; color: var(--text); background: color-mix(in oklab, var(--bg) 70%, white 30%); border: 1px solid var(--glass-border); padding: 8px 28px 8px 10px; border-radius: 10px; outline: none; cursor: pointer; min-width: 160px; }
    .accent-select option{ background: var(--bg); color: var(--text); }
    .chevron{ position: absolute; right: 8px; pointer-events: none; color: var(--muted); font-size: 12px; }

    /* ---------- Calculator ---------- */
    .wrap{ position: relative; z-index: 2; min-height: 100%; display: grid; place-items: center; padding: 24px; }
    .calculator{ width: min(92vw, 400px); padding: 18px; border-radius: 18px; background: var(--glass-bg); backdrop-filter: blur(14px) saturate(120%); border: 1px solid var(--glass-border); box-shadow: var(--shadow); transition: background-color 0.4s ease, border-color 0.4s ease; }

    /* Display & History */
    .display-container{ position: relative; display: flex; align-items: center; }
    .display{ width: 100%; height: 64px; font-size: 32px; font-family: 'Roboto Mono', monospace; text-align: right; color: var(--text); background: color-mix(in oklab, var(--bg) 70%, white 30%); border: 1px solid rgba(0,0,0,0.12); border-radius: 12px; padding: 10px 45px 10px 12px; margin-bottom: 14px; transition: font-size 0.2s ease; }
    .display.font-medium { font-size: 26px; }
    .display.font-small { font-size: 20px; }
    .history-toggle { position: absolute; right: 8px; top: 18px; height: 30px; width: 30px; border: none; background: transparent; color: var(--muted); font-size: 20px; cursor: pointer; opacity: 0.6; transition: opacity 0.2s ease; }
    .history-toggle:hover { opacity: 1; }
    .history-panel { max-height: 150px; overflow-y: auto; background: rgba(0,0,0,0.1); border-radius: 8px; margin-bottom: 14px; padding: 8px; }
    .history-panel ul { list-style: none; margin: 0; padding: 0; text-align: right; }
    .history-panel li { padding: 4px 8px; border-radius: 4px; cursor: pointer; }
    .history-panel li:hover { background: rgba(0,0,0,0.1); }
    .history-panel .expr { font-size: 12px; color: var(--muted); }
    .history-panel .res { font-size: 16px; font-weight: 500; color: var(--text); }

    /* Buttons grid */
    .buttons{ display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    .btn{ height: 48px; border: none; border-radius: 12px; font-size: 18px; color: var(--text); background: var(--btn-bg); cursor: pointer; box-shadow: 0 2px 8px var(--btn-inset) inset, 0 8px 20px var(--btn-shadow); transition: transform 0.1s ease, filter 0.1s ease; user-select: none; }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(0) scale(0.98); filter: brightness(0.9); }
    .btn.btn-span-4 { grid-column: span 4; }
    .btn-op{ background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 35%, transparent), color-mix(in oklab, var(--accent) 12%, transparent)); border: 1px solid color-mix(in oklab, var(--accent) 35%, transparent); }
    .btn-eq{ background: linear-gradient(180deg, color-mix(in oklab, var(--eq) 38%, transparent), color-mix(in oklab, var(--eq) 16%, transparent)); border: 1px solid color-mix(in oklab, var(--eq) 40%, transparent); }
    .btn-danger{ background: linear-gradient(180deg, color-mix(in oklab, var(--danger) 38%, transparent), color-mix(in oklab, var(--danger) 16%, transparent)); border: 1px solid color-mix(in oklab, var(--danger) 40%, transparent); }
    .btn-mem { font-size: 16px; background: color-mix(in oklab, var(--muted) 20%, transparent); border: 1px solid color-mix(in oklab, var(--muted) 30%, transparent); }

    @media (max-width: 420px){
      .btn{ height: 54px; font-size: 19px; }
      .display{ height: 68px; font-size: 34px; }
    }
  </style>
</head>
<body>
  <canvas id="netCanvas" aria-hidden="true"></canvas>

  <div class="theme-controls">
    <button id="themeToggle" class="theme-toggle" aria-label="Toggle Light/Dark" aria-pressed="false">‚òÄÔ∏è</button>
    <div class="accent-wrap">
      <label for="accentSelect" class="accent-label">Accent</label>
      <div class="select-shell">
        <span class="accent-dot" aria-hidden="true"></span>
        <select id="accentSelect" class="accent-select" aria-label="Choose accent theme">
          <option value="classic">Classic</option>
          <option value="blue">Blue</option>
          <option value="pink">Pink</option>
          <option value="orange">Orange</option>
          <option value="purple">Purple</option>
          <option value="magenta">Magenta</option>
        </select>
        <span class="chevron" aria-hidden="true">‚ñæ</span>
      </div>
    </div>
  </div>

  <main class="wrap">
    <div class="calculator" role="application" aria-label="Calculator">
      <div class="display-container">
        <input
          id="result"
          class="display"
          type="text"
          inputmode="text"
          aria-readonly="true"
          readonly
          placeholder="0"
        />
        <button id="historyToggle" class="history-toggle" aria-label="Toggle History">‚ó¥</button>
      </div>

      <div id="historyPanel" class="history-panel" hidden>
        <ul id="historyList"></ul>
      </div>

      <div class="buttons">
        <button class="btn btn-mem" data-action="mem-clear">MC</button>
        <button class="btn btn-mem" data-action="mem-recall">MR</button>
        <button class="btn btn-mem" data-action="mem-plus">M+</button>
        <button class="btn btn-danger" data-action="back">‚å´</button>

        <button class="btn" data-val="(">(</button>
        <button class="btn" data-val=")">)</button>
        <button class="btn btn-op" data-val="sqrt(">‚àö</button>
        <button class="btn btn-op" data-val="^">x ∏</button>

        <button class="btn" data-val="7">7</button>
        <button class="btn" data-val="8">8</button>
        <button class="btn" data-val="9">9</button>
        <button class="btn btn-op" data-val="/">√∑</button>

        <button class="btn" data-val="4">4</button>
        <button class="btn" data-val="5">5</button>
        <button class="btn" data-val="6">6</button>
        <button class="btn btn-op" data-val="*">√ó</button>

        <button class="btn" data-val="1">1</button>
        <button class="btn" data-val="2">2</button>
        <button class="btn" data-val="3">3</button>
        <button class="btn btn-op" data-val="-">‚àí</button>

        <button class="btn btn-danger" data-action="clear">C</button>
        <button class="btn" data-val="0">0</button>
        <button class="btn" data-val=".">.</button>
        <button class="btn btn-op" data-val="+">+</button>

        <button class="btn btn-eq btn-span-4" data-action="equals">=</button>
      </div>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.min.js"></script>
  <script>
    // Reactive ‚Äúcobweb / network‚Äù background that adapts to current theme variables
    (function () {
      const canvas = document.getElementById('netCanvas');
      const ctx = canvas.getContext('2d');
      const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));

      let width, height, particles, mouse;
      let linkDistance, cursorLinkDistance, particleCount;

      let colorNode, colorLinkBase, colorCursorBase;

      // EXPOSED FUNCTION: Creates a ripple effect in the particle network
      window.triggerNetRipple = (x, y) => {
        if (!particles) return;
        const rippleRadius = 100;
        const rippleStrength = 1.5;
        for (const p of particles) {
          const dx = x - p.x;
          const dy = y - p.y;
          const dist = Math.hypot(dx, dy);
          if (dist < rippleRadius) {
            const pull = (1 - dist / rippleRadius) * rippleStrength;
            p.vx -= (dx / (dist || 1)) * pull;
            p.vy -= (dy / (dist || 1)) * pull;
          }
        }
      };

      function readCssColors() {
        const cs = getComputedStyle(document.documentElement);
        colorNode = (cs.getPropertyValue('--net-node').trim()) || 'rgba(255,255,255,0.55)';
        colorLinkBase = (cs.getPropertyValue('--net-link').trim()) || 'rgba(180,200,255,0.28)';
        colorCursorBase = (cs.getPropertyValue('--net-cursor').trim()) || 'rgba(130,200,255,0.40)';
      }

      function resize() {
        width = canvas.clientWidth;
        height = canvas.clientHeight;
        canvas.width = Math.floor(width * DPR);
        canvas.height = Math.floor(height * DPR);
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        const density = 0.00012;
        particleCount = Math.floor(width * height * density);
        linkDistance = Math.max(80, Math.min(140, Math.hypot(width, height) * 0.06));
        cursorLinkDistance = linkDistance * 0.9;
        initParticles();
      }

      function initParticles() {
        particles = [];
        for (let i = 0; i < particleCount; i++) {
          particles.push({
            x: Math.random() * width,
            y: Math.random() * height,
            vx: (Math.random() - 0.5) * 0.4,
            vy: (Math.random() - 0.5) * 0.4,
            r: 1.15 + Math.random() * 1.1
          });
        }
      }

      mouse = { x: null, y: null, active: false };
      window.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;
        mouse.active = true;
      });
      window.addEventListener('mouseleave', () => { mouse.active = false; });
      window.addEventListener('resize', resize);
      window.addEventListener('themechange', () => { readCssColors(); });

      function colorWithAlpha(baseRgba, alpha) {
        const m = baseRgba.match(/rgba?\s*\(([^)]+)\)/i);
        if (!m) return baseRgba;
        const [r, g, b] = m[1].split(',').map(s => s.trim());
        return `rgba(${r}, ${g}, ${b}, ${Math.max(0, Math.min(1, alpha))})`;
      }

      function step() {
        ctx.clearRect(0, 0, width, height);
        for (const p of particles) {
          if (mouse.active) {
            const dx = mouse.x - p.x;
            const dy = mouse.y - p.y;
            const dist = Math.hypot(dx, dy);
            const attractRadius = 120;
            if (dist < attractRadius) {
              const pull = (1 - dist / attractRadius) * 0.6;
              p.vx += (dx / (dist || 1)) * pull * 0.03;
              p.vy += (dy / (dist || 1)) * pull * 0.03;
            }
          }
          p.x += p.vx;
          p.y += p.vy;
          if (p.x < -10) p.x = width + 10;
          if (p.x > width + 10) p.x = -10;
          if (p.y < -10) p.y = height + 10;
          if (p.y > height + 10) p.y = -10;
        }
        for (let i = 0; i < particles.length; i++) {
          const a = particles[i];
          ctx.beginPath();
          ctx.arc(a.x, a.y, a.r, 0, Math.PI * 2);
          ctx.fillStyle = colorNode;
          ctx.fill();
          for (let j = i + 1; j < particles.length; j++) {
            const b = particles[j];
            const dist = Math.hypot(a.x - b.x, a.y - b.y);
            if (dist < linkDistance) {
              const alpha = 0.28 * (1 - dist / linkDistance);
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.strokeStyle = colorWithAlpha(colorLinkBase, alpha);
              ctx.lineWidth = 1;
              ctx.stroke();
            }
          }
          if (mouse.active) {
            const dist = Math.hypot(mouse.x - a.x, mouse.y - a.y);
            if (dist < cursorLinkDistance) {
              const alpha = 0.35 * (1 - dist / cursorLinkDistance);
              ctx.beginPath();
              ctx.moveTo(mouse.x, mouse.y);
              ctx.lineTo(a.x, a.y);
              ctx.strokeStyle = colorWithAlpha(colorCursorBase, alpha);
              ctx.lineWidth = 1.2;
              ctx.stroke();
            }
          }
        }
        requestAnimationFrame(step);
      }

      readCssColors();
      resize();
      step();
    })();
  </script>
  <script>
    // Calculator + Theme & Accent handling
    (function () {
      'use strict';
      // ---------- Theme Handling ----------
      const THEME_KEY = 'calc-theme';
      const html = document.documentElement;
      const toggleBtn = document.getElementById('themeToggle');
      const accentSelect = document.getElementById('accentSelect');
      const accentDot = document.querySelector('.accent-dot');

      const systemPrefersDark = () => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDarkTheme = (theme) => theme && theme.startsWith('dark');

      const getAccentFromTheme = (theme) => {
        if (theme === 'light' || theme === 'dark') return 'classic';
        return theme.replace('dark-', '').replace('light-', '');
      };

      const updateAccentPreview = () => {
        const cs = getComputedStyle(document.documentElement);
        const accentColor = cs.getPropertyValue('--accent').trim();
        accentDot.style.background = accentColor;
        accentDot.style.boxShadow = `0 0 0 2px color-mix(in oklab, ${accentColor} 40%, transparent)`;
      };

      const applyTheme = (theme) => {
        html.setAttribute('data-theme', theme);
        localStorage.setItem(THEME_KEY, theme);
        toggleBtn.textContent = isDarkTheme(theme) ? '‚òÄÔ∏è' : 'üåô';
        accentSelect.value = getAccentFromTheme(theme);
        updateAccentPreview();
        window.dispatchEvent(new CustomEvent('themechange', { detail: { theme } }));
      };

      (() => { // initTheme
        const savedTheme = localStorage.getItem(THEME_KEY);
        applyTheme(savedTheme ?? (systemPrefersDark() ? 'dark-magenta' : 'light-magenta'));
      })();

      toggleBtn.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-theme');
        const accent = getAccentFromTheme(currentTheme);
        const newTheme = isDarkTheme(currentTheme)
          ? (accent === 'classic' ? 'light' : `light-${accent}`)
          : (accent === 'classic' ? 'dark' : `dark-${accent}`);
        applyTheme(newTheme);
      });

      accentSelect.addEventListener('change', () => {
        const selectedAccent = accentSelect.value;
        const newTheme = selectedAccent === 'classic'
          ? (isDarkTheme(html.getAttribute('data-theme')) ? 'dark' : 'light')
          : `${isDarkTheme(html.getAttribute('data-theme')) ? 'dark' : 'light'}-${selectedAccent}`;
        applyTheme(newTheme);
      });

      // ---------- Calculator ----------
      const display = document.getElementById('result');
      const buttons = document.querySelector('.buttons');
      const historyToggle = document.getElementById('historyToggle');
      const historyPanel = document.getElementById('historyPanel');
      const historyList = document.getElementById('historyList');

      const clickFeedback = (() => {
        let ctx;
        return () => {
          if (!window.AudioContext && !window.webkitAudioContext) return;
          ctx = ctx || new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = ctx.createOscillator();
          const gain = ctx.createGain();
          oscillator.type = 'triangle';
          oscillator.frequency.value = 280;
          gain.gain.value = 0.04;
          oscillator.connect(gain);
          gain.connect(ctx.destination);
          oscillator.start();
          gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.08);
          oscillator.stop(ctx.currentTime + 0.08);
        };
      })();

      const mathParser = math.parser();

      let memory = 0;
      let history = [];

      const updateDisplayFontSize = () => {
        const len = display.value.length;
        display.classList.remove('font-medium', 'font-small');
        if (len > 22) display.classList.add('font-small');
        else if (len > 14) display.classList.add('font-medium');
      };

      const appendValue = (val) => {
        const ops = ['+', '-', '*', '/', '.', '^'];
        const last = display.value.slice(-1);
        if (ops.includes(last) && ops.includes(val)) return;
        display.value += val;
        updateDisplayFontSize();
      };

      const clearAll = () => {
        display.value = '';
        updateDisplayFontSize();
      };

      const backspace = () => {
        display.value = display.value.slice(0, -1);
        updateDisplayFontSize();
      };

      const calculate = () => {
        let expression = display.value.trim();
        if (!expression) return;
        try {
          // Replace visual operators with code-friendly ones
          expression = expression.replace(/√ó/g, '*').replace(/√∑/g, '/');
          const result = mathParser.evaluate(expression);

          if (typeof result !== 'number' || !Number.isFinite(result)) throw new Error('Invalid');

          // Add to history
          history.unshift({ expression: display.value, result: result });
          if (history.length > 20) history.pop(); // Keep history short
          renderHistory();

          display.value = result.toLocaleString('en-US', { maximumFractionDigits: 10 });

        } catch (e) {
          display.value = 'Error';
          console.error(e);
        }
        updateDisplayFontSize();
      };

      const renderHistory = () => {
        historyList.innerHTML = '';
        history.forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<div class="expr">${item.expression} =</div><div class="res">${item.result.toLocaleString('en-US')}</div>`;
          li.addEventListener('click', () => {
            display.value = String(item.result);
            updateDisplayFontSize();
            historyPanel.hidden = true;
          });
          historyList.appendChild(li);
        });
      };

      const handleMemory = (action) => {
        const currentValue = parseFloat(display.value) || 0;
        if (action === 'mem-clear') memory = 0;
        else if (action === 'mem-plus') memory += currentValue;
        else if (action === 'mem-recall') {
          display.value = String(memory);
          updateDisplayFontSize();
        }
      };

      buttons.addEventListener('click', (e) => {
        const t = e.target;
        if (!(t instanceof HTMLButtonElement)) return;

        // Feedback: Sound and Background Ripple
        clickFeedback();
        if (window.triggerNetRipple) {
          const rect = t.getBoundingClientRect();
          window.triggerNetRipple(rect.left + rect.width / 2, rect.top + rect.height / 2);
        }

        const val = t.dataset.val;
        const action = t.dataset.action;

        if (val !== undefined) appendValue(val);
        else if (action === 'clear') clearAll();
        else if (action === 'back') backspace();
        else if (action === 'equals') calculate();
        else if (action && action.startsWith('mem-')) handleMemory(action);
      });

      historyToggle.addEventListener('click', () => {
        historyPanel.hidden = !historyPanel.hidden;
        if (!historyPanel.hidden) renderHistory();
      });

      window.addEventListener('keydown', (e) => {
        const k = e.key;
        if ((k >= '0' && k <= '9') || ['+', '-', '*', '/', '.', '(', ')', '^'].includes(k)) appendValue(k);
        else if (k === 'Enter' || k === '=') { e.preventDefault(); calculate(); }
        else if (k === 'Backspace') backspace();
        else if (k === 'Escape' || (k.toLowerCase() === 'c' && !e.ctrlKey)) clearAll();
      });
    })();
  </script>
</body>
</html>
